<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arbre G√©n√©alogique - Ta'a Fieu Tagni Tinang Joseph</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #2c5f4f;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.2em;
        }

        .boarding-pass {
            max-width: 800px;
            margin: 0 auto 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-left: 5px solid #4a7c6b;
        }

        .boarding-pass h2 {
            color: #2c5f4f;
            margin-bottom: 15px;
        }

        .tree-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .generation-row {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-bottom: 60px;
            position: relative;
        }

        .generation-row::after {
            content: '';
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 2px;
            background: #ccc;
        }

        .generation-row:last-child::after {
            display: none;
        }

        .generation-label {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            font-weight: bold;
            color: #2c5f4f;
            margin-right: 20px;
            padding: 10px;
            background: #e8f4f0;
            border-radius: 8px;
        }

        .members-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            flex: 1;
        }

        .person-box {
            padding: 15px 20px;
            border-radius: 8px;
            min-width: 180px;
            max-width: 220px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
            position: relative;
        }

        .person-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Couleurs par g√©n√©ration - Style Template */
        .gen-1 { 
            background: linear-gradient(135deg, #a8d5ba 0%, #88c0a5 100%);
            border-color: #6fa585;
        }

        .gen-2 { 
            background: linear-gradient(135deg, #d4d4d4 0%, #b8b8b8 100%);
            border-color: #999;
        }

        .gen-3 { 
            background: linear-gradient(135deg, #333333 0%, #1a1a1a 100%);
            border-color: #000;
            color: white;
        }

        .gen-4 { 
            background: linear-gradient(135deg, #f4e04d 0%, #e8d73a 100%);
            border-color: #d4c230;
        }

        .gen-5 { 
            background: linear-gradient(135deg, #a8d5ba 0%, #88c0a5 100%);
            border-color: #6fa585;
        }

        .gen-6 { 
            background: linear-gradient(135deg, #87ceeb 0%, #6db9d6 100%);
            border-color: #5a9fc0;
        }

        .gen-7 { 
            background: linear-gradient(135deg, #4682b4 0%, #36648b 100%);
            border-color: #2c5474;
            color: white;
        }

        .person-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .person-dates {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .person-role {
            font-size: 0.85em;
            margin-top: 5px;
            font-style: italic;
        }

        .heir-star {
            position: absolute;
            top: -10px;
            right: -10px;
            color: gold;
            font-size: 24px;
            text-shadow: 0 0 5px rgba(0,0,0,0.3);
        }

        .patriarch-crown {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 28px;
            cursor: pointer;
            color: #666;
            background: none;
            border: none;
        }

        .modal-close:hover {
            color: #000;
        }

        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4a7c6b;
        }

        .modal-header h2 {
            color: #2c5f4f;
            margin-bottom: 5px;
        }

        .modal-section {
            margin: 15px 0;
        }

        .modal-section h3 {
            color: #4a7c6b;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .modal-section p {
            color: #333;
            line-height: 1.6;
        }

        .spouse-info {
            background: #f0f8f5;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }

        .children-list {
            background: #fff8e1;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .children-list ul {
            list-style-position: inside;
            margin-left: 10px;
        }

        .children-list li {
            padding: 3px 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .tree-container {
                padding: 20px;
            }

            .person-box {
                min-width: 150px;
            }

            .generation-row {
                flex-direction: column;
                align-items: center;
            }

            .generation-label {
                writing-mode: horizontal-tb;
                margin-right: 0;
                margin-bottom: 10px;
            }
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4a7c6b 0%, #2c5f4f 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
            margin-top: 5px;
        }

        /* Navigation Tabs */
        .tabs-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: #2c5f4f;
            background: #f0f8f5;
        }

        .tab.active {
            color: #2c5f4f;
            border-bottom-color: #4a7c6b;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Generation Filters */
        .generation-filters {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .filter-title {
            color: #2c5f4f;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .gen-filter {
            padding: 8px 16px;
            border: 2px solid #4a7c6b;
            background: white;
            color: #4a7c6b;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .gen-filter.active {
            background: #4a7c6b;
            color: white;
        }

        .gen-filter:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }

        .filter-count {
            background: rgba(255,255,255,0.3);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.8em;
        }

        .gen-filter.active .filter-count {
            background: rgba(255,255,255,0.3);
        }

        .generation-row.hidden {
            display: none;
        }

        .all-filters {
            padding: 8px 16px;
            border: 2px solid #666;
            background: white;
            color: #666;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s;
        }

        .all-filters.active {
            background: #666;
            color: white;
        }
            border-bottom-color: #4a7c6b;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            font-size: 1em;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            outline: none;
            border-color: #4a7c6b;
        }

        .persons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .person-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .person-card:hover {
            border-color: #4a7c6b;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .person-card h3 {
            color: #2c5f4f;
            margin-bottom: 10px;
        }

        .person-card p {
            margin: 5px 0;
            color: #666;
        }

        .locations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .location-card {
            background: linear-gradient(135deg, #f0f8f5 0%, #e8f4f0 100%);
            border-left: 5px solid #4a7c6b;
            border-radius: 10px;
            padding: 20px;
        }

        .location-card h3 {
            color: #2c5f4f;
            margin-bottom: 10px;
        }

        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline-item {
            display: flex;
            margin-bottom: 30px;
            position: relative;
        }

        .timeline-date {
            min-width: 120px;
            font-weight: bold;
            color: #4a7c6b;
            padding-right: 20px;
        }

        .timeline-content {
            flex: 1;
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #4a7c6b;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .timeline-content h4 {
            color: #2c5f4f;
            margin-bottom: 8px;
        }

        .timeline-content p {
            color: #666;
            line-height: 1.6;
        }

        /* Royal Lineage Diagram */
        .royal-diagram {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            margin-top: 30px;
            overflow-x: auto;
        }

        .diagram-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 800px;
        }

        .diagram-level {
            display: flex;
            align-items: center;
            margin: 20px 0;
            position: relative;
        }

        .diagram-person {
            background: white;
            border: 2px solid #4a7c6b;
            border-radius: 10px;
            padding: 15px 20px;
            margin: 0 10px;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .diagram-person.royal {
            background: linear-gradient(135deg, #fff8e1 0%, #ffe082 100%);
            border-color: #ffd54f;
        }

        .diagram-person.patriarch {
            background: linear-gradient(135deg, #f4e04d 0%, #e8d73a 100%);
            border-color: #d4c230;
            font-weight: bold;
        }

        .diagram-person h4 {
            color: #2c5f4f;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .diagram-person p {
            color: #666;
            font-size: 0.9em;
            margin: 2px 0;
        }

        .diagram-connector {
            width: 2px;
            height: 40px;
            background: #4a7c6b;
            margin: 0 auto;
        }

        .diagram-branch {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .diagram-branch::before {
            content: '';
            width: 100px;
            height: 2px;
            background: #4a7c6b;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üå≥ Arbre G√©n√©alogique</h1>
        <p><strong>Ta'a Fieu Tagni Tinang Joseph</strong></p>
        <p style="font-size: 0.9em; color: #888; margin-top: 10px;">Patriarche (1898-2001) ‚Ä¢ 7 G√©n√©rations ‚Ä¢ 1770s - 2025</p>
    </div>

    <div class="boarding-pass">
        <h2>üåø Patrimoine Familial</h2>
        <p><strong>Sept g√©n√©rations, une histoire</strong></p>
        <p style="margin-top: 10px;">Explorez notre h√©ritage familial en cliquant sur chaque membre pour d√©couvrir son histoire, ses liens et sa contribution √† notre lign√©e.</p>
    </div>

    <div class="stats-container" id="statsContainer">
        <!-- Stats will be generated by JavaScript -->
    </div>

    <div class="tabs-container">
        <div class="tabs">
            <button class="tab active" onclick="switchTab('overview', this)">üìä Aper√ßu</button>
            <button class="tab" onclick="switchTab('royal', this)">üëë Lign√©es Royales</button>
            <button class="tab" onclick="switchTab('tree', this)">üå≥ Arbre</button>
            <button class="tab" onclick="switchTab('persons', this)">üë• Personnes</button>
            <button class="tab" onclick="switchTab('locations', this)">üìç Localit√©s</button>
            <button class="tab" onclick="switchTab('timeline', this)">üìÖ Dates Cl√©s</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2 style="color: #2c5f4f; margin-bottom: 20px;">Vue d'ensemble de la famille</h2>
            <div id="overviewContent">
                <!-- Content will be generated by JavaScript -->
            </div>
        </div>

        <!-- Royal Lineages Tab -->
        <div id="royal" class="tab-content">
            <h2 style="color: #2c5f4f; margin-bottom: 20px;">üëë Lign√©es Royales</h2>
            
            <div style="background: linear-gradient(135deg, #fff8e1 0%, #ffe082 100%); padding: 30px; border-radius: 15px; margin-bottom: 30px; border: 3px solid #ffd54f;">
                <h3 style="color: #2c5f4f; margin-bottom: 15px; text-align: center;">Statut Royal de la Famille</h3>
                <p style="text-align: center; font-size: 1.1em; line-height: 1.8;">
                    En tant que descendants des chefferies <strong>Baleng</strong>, <strong>Balengou</strong>, 
                    <strong>Batchingou</strong> et <strong>Bamena</strong>, les petits-fils et arri√®re-petits-fils 
                    de Magni Kouabou et de Tchi√© Ngantchi√© sont des <strong style="color: #d4a300;">princes et altesses royales</strong>.
                </p>
                <p style="text-align: center; margin-top: 15px; font-style: italic; color: #666;">
                    Cette lign√©e royale traverse sept g√©n√©rations et quatre chefferies traditionnelles du pays Bamil√©k√©.
                </p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
                
                <!-- Chefferie Baleng -->
                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 6px solid #8b4513; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                    <h4 style="color: #2c5f4f; margin-bottom: 15px; font-size: 1.2em;">1Ô∏è‚É£ CHEFFERIE BALENG</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin: 10px 0;">üë§ <strong>Connexion:</strong> Prince Nandjo (~1770s)</li>
                        <li style="margin: 10px 0;">üö∂ <strong>Migration:</strong> Baleng ‚Üí Balengou</li>
                        <li style="margin: 10px 0;">üèõÔ∏è <strong>R√¥le:</strong> Fondateur de Balengou (Kouodjou)</li>
                        <li style="margin: 10px 0;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <strong>Descendance:</strong> Via neveu Neyou</li>
                        <li style="margin: 10px 0;">üìç <strong>Localisation:</strong> R√©gion de Baleng, Ouest Cameroun</li>
                    </ul>
                </div>

                <!-- Chefferie Balengou -->
                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 6px solid #4a7c6b; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                    <h4 style="color: #2c5f4f; margin-bottom: 15px; font-size: 1.2em;">2Ô∏è‚É£ CHEFFERIE BALENGOU</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin: 10px 0;">üë§ <strong>Connexion:</strong> Neyou ‚Üí Wetio Kouamou</li>
                        <li style="margin: 10px 0;">üëë <strong>Lign√©e:</strong> Magni Kouabou (Ndepgweu-tu)</li>
                        <li style="margin: 10px 0;">üéñÔ∏è <strong>Titre accord√©:</strong> "Ta'a fieu" √† Joseph Tinang</li>
                        <li style="margin: 10px 0;">üí´ <strong>Signification:</strong> "P√®re du chef" - haute reconnaissance</li>
                        <li style="margin: 10px 0;">üíç <strong>Connexion actuelle:</strong> Adeline Paule (√©pouse de l'h√©ritier)</li>
                    </ul>
                </div>

                <!-- Chefferie Batchingou -->
                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 6px solid #2196f3; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                    <h4 style="color: #2c5f4f; margin-bottom: 15px; font-size: 1.2em;">3Ô∏è‚É£ CHEFFERIE BATCHINGOU</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin: 10px 0;">üë§ <strong>Connexion:</strong> Tchi√© Ngantchi√©</li>
                        <li style="margin: 10px 0;">‚öîÔ∏è <strong>Fonction:</strong> Ministre de la D√©fense (Metchoumbouh)</li>
                        <li style="margin: 10px 0;">üëë <strong>Lign√©e:</strong> Tchassep "Ta'a Tchiendjo"</li>
                        <li style="margin: 10px 0;">üè° <strong>Concession:</strong> Toukou, Tousseu (terre ancestrale)</li>
                        <li style="margin: 10px 0;">üìú <strong>Rois connus:</strong> Tchiengu√©, Ngongang Salomon, Kepgang Mathieu Denis, Nana Andr√© Flaubert</li>
                    </ul>
                </div>

                <!-- Chefferie Bamena -->
                <div style="background: white; padding: 25px; border-radius: 12px; border-left: 6px solid #9c27b0; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
                    <h4 style="color: #2c5f4f; margin-bottom: 15px; font-size: 1.2em;">4Ô∏è‚É£ CHEFFERIE BAMENA</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin: 10px 0;">üë§ <strong>Connexion:</strong> Ta'a Nanwou</li>
                        <li style="margin: 10px 0;">üëë <strong>Lign√©e:</strong> Megni Ngongang Rebecca (grand-m√®re)</li>
                        <li style="margin: 10px 0;">üí´ <strong>Statut:</strong> Petite-fille du chef Bamena</li>
                        <li style="margin: 10px 0;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <strong>Famille:</strong> Ngoko Andr√©, Ketchozo Dieudonn√©</li>
                        <li style="margin: 10px 0;">üìç <strong>Localisation:</strong> R√©gion de Bamena, Ouest Cameroun</li>
                    </ul>
                </div>

            </div>

            <!-- Diagramme de la Lign√©e Royale -->
            <div class="royal-diagram">
                <h3 style="color: #2c5f4f; margin-bottom: 20px; text-align: center;">üå≥ Diagramme de la Lign√©e Royale</h3>
                <div class="diagram-container">
                    
                    <!-- G√©n√©ration 1 -->
                    <div class="diagram-level">
                        <div class="diagram-person royal">
                            <h4>üëë Prince Nandjo</h4>
                            <p>~1770s</p>
                            <p>Chefferie Baleng</p>
                        </div>
                        <div class="diagram-branch"></div>
                        <div class="diagram-person royal">
                            <h4>üëë Neyou</h4>
                            <p>~1770s</p>
                            <p>Neveu du Prince</p>
                        </div>
                    </div>
                    
                    <div class="diagram-connector"></div>
                    
                    <!-- G√©n√©ration 2 -->
                    <div class="diagram-level">
                        <div class="diagram-person royal">
                            <h4>üëë Wetio Kouamou</h4>
                            <p>~1800s</p>
                            <p>Descendant de Neyou</p>
                        </div>
                        <div class="diagram-branch"></div>
                        <div class="diagram-person royal">
                            <h4>üëë Magni Kouabou</h4>
                            <p>~1800s</p>
                            <p>Fille a√Æn√©e</p>
                        </div>
                        <div class="diagram-branch"></div>
                        <div class="diagram-person royal">
                            <h4>üëë Tchi√© Ngantchi√©</h4>
                            <p>~1800s</p>
                            <p>Ministre D√©fense Batchingou</p>
                        </div>
                    </div>
                    
                    <div class="diagram-connector"></div>
                    
                    <!-- G√©n√©ration 3 -->
                    <div class="diagram-level">
                        <div class="diagram-person royal">
                            <h4>üëë Ngnoumegni</h4>
                            <p>~1868</p>
                            <p>Fille de Magni Kouabou</p>
                        </div>
                        <div class="diagram-branch"></div>
                        <div class="diagram-person royal">
                            <h4>üëë Tchassep "Ta'a Tchiendjo"</h4>
                            <p>~1868</p>
                            <p>Descendant de Tchi√© Ngantchi√©</p>
                        </div>
                    </div>
                    
                    <div class="diagram-connector"></div>
                    
                    <!-- G√©n√©ration 4 - Patriarche -->
                    <div class="diagram-level">
                        <div class="diagram-person patriarch">
                            <h4>üëë Ta'a Fieu Tagni Tinang Joseph</h4>
                            <p>1898-2001 (103 ans)</p>
                            <p><strong>PATRIARCHE</strong></p>
                            <p>+ Megni Ngongang Rebecca (Bamena)</p>
                        </div>
                    </div>
                    
                    <div class="diagram-connector"></div>
                    
                    <!-- G√©n√©ration 5 -->
                    <div class="diagram-level">
                        <div class="diagram-person">
                            <h4>‚≠ê Poueme Emmanuel</h4>
                            <p>N√© 1950</p>
                            <p><strong>H√âRITIER</strong></p>
                        </div>
                        <div style="margin: 0 20px; text-align: center; color: #666;">
                            <p>+ 8 autres enfants</p>
                            <p>(1948-1964)</p>
                        </div>
                    </div>
                    
                    <div class="diagram-connector"></div>
                    
                    <!-- G√©n√©ration 6 -->
                    <div class="diagram-level">
                        <div class="diagram-person">
                            <h4>Poueme Serge Donald</h4>
                            <p>N√© 1982</p>
                            <p>Futur successeur</p>
                        </div>
                        <div style="margin: 0 20px; text-align: center; color: #666;">
                            <p>+ 35+ cousins</p>
                            <p>(1975-2002)</p>
                        </div>
                    </div>
                    
                    <div class="diagram-connector"></div>
                    
                    <!-- G√©n√©ration 7 -->
                    <div class="diagram-level">
                        <div class="diagram-person">
                            <h4>Poueme Serena & Noa</h4>
                            <p>2015-2018</p>
                            <p>Nouvelle g√©n√©ration</p>
                        </div>
                    </div>
                    
                </div>
            </div>

            <!-- Note sur la transmission -->
            <div style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); padding: 25px; border-radius: 12px; margin-top: 25px; border-left: 5px solid #4caf50;">
                <h4 style="color: #2c5f4f; margin-bottom: 15px;">üìå Transmission du Statut Royal</h4>
                <p style="line-height: 1.8; color: #333;">
                    Le statut de <strong>prince et altesse royale</strong> se transmet de g√©n√©ration en g√©n√©ration 
                    par filiation directe. Tous les descendants du Patriarche Ta'a Fieu Tagni Tinang Joseph 
                    portent ce titre honorifique en vertu de leurs connexions multiples aux quatre chefferies 
                    traditionnelles Bamil√©k√©.
                </p>
                <p style="line-height: 1.8; color: #333; margin-top: 15px;">
                    Le titre <strong>"Ta'a fieu"</strong> (P√®re du chef) accord√© par la chefferie de Balengou 
                    repr√©sente une reconnaissance de la plus haute importance dans la tradition Bamil√©k√© et 
                    confirme le statut royal de la lign√©e familiale.
                </p>
            </div>

        </div>

        <!-- Tree Tab -->
        <div id="tree" class="tab-content">
            <h2 style="color: #2c5f4f; margin-bottom: 20px;">Arbre g√©n√©alogique</h2>
            
            <!-- Generation Filters -->
            <div class="generation-filters">
                <div class="filter-title">
                    üîç Filtrer par g√©n√©ration
                    <span id="visibleCount" style="color: #666; font-size: 0.9em;"></span>
                </div>
                <div class="filter-buttons">
                    <button class="all-filters active" onclick="toggleAllGenerations()">Toutes</button>
                    <button class="gen-filter active" data-gen="1" onclick="toggleGeneration(1)">
                        Gen 1 <span class="filter-count" id="count-1">2</span>
                    </button>
                    <button class="gen-filter active" data-gen="2" onclick="toggleGeneration(2)">
                        Gen 2 <span class="filter-count" id="count-2">3</span>
                    </button>
                    <button class="gen-filter active" data-gen="3" onclick="toggleGeneration(3)">
                        Gen 3 <span class="filter-count" id="count-3">2</span>
                    </button>
                    <button class="gen-filter active" data-gen="4" onclick="toggleGeneration(4)">
                        Gen 4 <span class="filter-count" id="count-4">1</span>
                    </button>
                    <button class="gen-filter active" data-gen="5" onclick="toggleGeneration(5)">
                        Gen 5 <span class="filter-count" id="count-5">9</span>
                    </button>
                    <button class="gen-filter active" data-gen="6" onclick="toggleGeneration(6)">
                        Gen 6 <span class="filter-count" id="count-6">35</span>
                    </button>
                    <button class="gen-filter active" data-gen="7" onclick="toggleGeneration(7)">
                        Gen 7 <span class="filter-count" id="count-7">2</span>
                    </button>
                </div>
            </div>
            
            <div id="familyTree">
                <!-- Tree will be generated by JavaScript -->
            </div>
        </div>

        <!-- Persons Tab -->
        <div id="persons" class="tab-content">
            <h2 style="color: #2c5f4f; margin-bottom: 20px;">Tous les membres de la famille</h2>
            <div class="search-container">
                <input type="text" class="search-box" id="personSearch" placeholder="üîç Rechercher une personne..." onkeyup="filterPersons()">
            </div>
            <div id="personsGrid" class="persons-grid">
                <!-- Persons will be generated by JavaScript -->
            </div>
        </div>

        <!-- Locations Tab -->
        <div id="locations" class="tab-content">
            <h2 style="color: #2c5f4f; margin-bottom: 20px;">Localit√©s familiales</h2>
            <div id="locationsGrid" class="locations-grid">
                <!-- Locations will be generated by JavaScript -->
            </div>
        </div>

        <!-- Timeline Tab -->
        <div id="timeline" class="tab-content">
            <h2 style="color: #2c5f4f; margin-bottom: 20px;">Chronologie familiale</h2>
            <div id="timelineContent" class="timeline">
                <!-- Timeline will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="personModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div id="modalBody">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Data will be loaded from external JSON file
        let familyData = null;

        // Load data from JSON file
        async function loadData() {
            try {
                const response = await fetch('family-data.json');
                if (!response.ok) {
                    throw new Error('Impossible de charger les donn√©es');
                }
                familyData = await response.json();
                console.log('Donn√©es charg√©es:', familyData);
                renderStats();
                renderOverview();
                renderTree();
                renderPersons();
                renderLocations();
                renderTimeline();
            } catch (error) {
                console.error('Erreur de chargement:', error);
                document.getElementById('familyTree').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <h3>Erreur de chargement des donn√©es</h3>
                        <p>Assurez-vous que le fichier family-data.json est dans le m√™me dossier.</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">Erreur: ${error.message}</p>
                    </div>
                `;
            }
        }

        // Tab switching
        function switchTab(tabName, element) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab');
            buttons.forEach(btn => btn.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            if (element) {
                element.classList.add('active');
            }
        }

        function renderStats() {
            if (!familyData) return;

            const totalPeople = familyData.families.length;
            const generations = familyData.generations.length;
            const locations = familyData.locations ? familyData.locations.length : 6;

            const statsHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalPeople}</div>
                    <div class="stat-label">Membres de la famille</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${generations}</div>
                    <div class="stat-label">G√©n√©rations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${locations}</div>
                    <div class="stat-label">Localit√©s</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">255</div>
                    <div class="stat-label">Ans d'histoire</div>
                </div>
            `;

            document.getElementById('statsContainer').innerHTML = statsHTML;
        }

        function renderOverview() {
            if (!familyData) return;

            const patriarch = familyData.families.find(p => p.role === 'Patriarche');
            const heir = familyData.families.find(p => p.role === 'H√©ritier');

            let html = `
                <div style="background: linear-gradient(135deg, #f0f8f5 0%, #e8f4f0 100%); padding: 30px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="color: #2c5f4f; margin-bottom: 15px;">üëë Le Patriarche</h3>
                    <h4 style="color: #4a7c6b;">${patriarch.name}</h4>
                    <p><strong>${patriarch.dates}</strong> (${patriarch.lifespan})</p>
                    <p>${patriarch.birthPlace}</p>
                    <p style="margin-top: 10px;"><em>${patriarch.notes}</em></p>
                </div>

                <div style="background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%); padding: 30px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="color: #2c5f4f; margin-bottom: 15px;">‚≠ê L'H√©ritier</h3>
                    <h4 style="color: #4a7c6b;">${heir.name}</h4>
                    <p><strong>Ndap:</strong> ${heir.ndap}</p>
                    <p><strong>N√©:</strong> ${heir.born}</p>
                    <p><strong>Succession:</strong> ${heir.succession}</p>
                </div>

                <div style="background: linear-gradient(135deg, #fef9e7 0%, #fcf3cf 100%); padding: 30px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #f4d03f;">
                    <h3 style="color: #2c5f4f; margin-bottom: 20px; text-align: center;">üëë Lign√©es Royales de la Famille</h3>
                    <p style="text-align: center; margin-bottom: 20px; font-style: italic; color: #666;">
                        La famille descend de quatre chefferies royales Bamil√©k√©
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 5px solid #e67e22;">
                            <h4 style="color: #e67e22; margin-bottom: 12px;">1Ô∏è‚É£ Chefferie BALENG</h4>
                            <ul style="list-style: none; padding: 0; color: #555; line-height: 1.8;">
                                <li><strong>üìç Connexion:</strong> Prince Nandjo (~1770s)</li>
                                <li><strong>üö∂ Migration:</strong> Baleng ‚Üí Balengou</li>
                                <li><strong>üë§ R√¥le:</strong> Fondateur de Balengou (Kouodjou)</li>
                                <li><strong>üë®‚Äçüë¶ Descendance:</strong> Via neveu Neyou</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 5px solid #27ae60;">
                            <h4 style="color: #27ae60; margin-bottom: 12px;">2Ô∏è‚É£ Chefferie BALENGOU</h4>
                            <ul style="list-style: none; padding: 0; color: #555; line-height: 1.8;">
                                <li><strong>üìç Connexion:</strong> Neyou ‚Üí Wetio Kouamou</li>
                                <li><strong>üëë Lign√©e:</strong> Magni Kouabou (Ndepgweu-tu)</li>
                                <li><strong>üéñÔ∏è Titre accord√©:</strong> "Ta'a fieu" √† Joseph Tinang</li>
                                <li><strong>üí° Signification:</strong> "P√®re du chef"</li>
                                <li><strong>üíç Connexion actuelle:</strong> Ngankeu Tooua Adeline Paule</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 5px solid #c0392b;">
                            <h4 style="color: #c0392b; margin-bottom: 12px;">3Ô∏è‚É£ Chefferie BATCHINGOU</h4>
                            <ul style="list-style: none; padding: 0; color: #555; line-height: 1.8;">
                                <li><strong>üìç Connexion:</strong> Tchi√© Ngantchi√©</li>
                                <li><strong>‚öîÔ∏è Fonction:</strong> Ministre de la D√©fense (Metchoumbouh)</li>
                                <li><strong>üëë Lign√©e:</strong> Tchassep "Ta'a Tchiendjo"</li>
                                <li><strong>üè° Concession:</strong> Toukou, Tousseu (terre ancestrale)</li>
                                <li><strong>üë®‚Äçüë¶‚Äçüë¶ Rois:</strong> Tchiengu√©, Ngongang Salomon, Kepgang Mathieu Denis, Nana Andr√© Flaubert</li>
                            </ul>
                        </div>

                        <div style="background: white; padding: 20px; border-radius: 8px; border-left: 5px solid #8e44ad;">
                            <h4 style="color: #8e44ad; margin-bottom: 12px;">4Ô∏è‚É£ Chefferie BAMENA</h4>
                            <ul style="list-style: none; padding: 0; color: #555; line-height: 1.8;">
                                <li><strong>üìç Connexion:</strong> Ta'a Nanwou</li>
                                <li><strong>üëë Lign√©e:</strong> Megni Ngongang Rebecca (grand-m√®re)</li>
                                <li><strong>üë∏ Statut:</strong> Petite-fille du chef Bamena</li>
                                <li><strong>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Famille:</strong> Ngoko Andr√©, Ketchozo Dieudonn√©</li>
                            </ul>
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #e8f8f5 0%, #d5f4e6 100%); padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid #27ae60;">
                        <h4 style="color: #27ae60; margin-bottom: 10px; text-align: center;">üëë Statut Royal des Descendants</h4>
                        <p style="text-align: center; color: #555; line-height: 1.6;">
                            En tant que descendants des chefferies <strong>Baleng</strong>, <strong>Balengou</strong>, <strong>Batchingou</strong> et <strong>Bamena</strong>, 
                            les petits-fils et arri√®re-petits-fils de <strong>Magni Kouabou</strong> et de <strong>Tchi√© Ngantchi√©</strong> 
                            sont des <strong style="color: #27ae60;">princes et altesses royales</strong>.
                        </p>
                        <p style="text-align: center; color: #666; margin-top: 10px; font-style: italic;">
                            Ce statut royal se transmet √† travers les g√©n√©rations 5, 6 et 7.
                        </p>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #d4af37;">
                        <h4 style="color: #8b4513; margin-bottom: 10px;">üìä G√©n√©rations 1-3</h4>
                        <p><strong>Lign√©e royale</strong></p>
                        <p>1770s-1898</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #4a7c6b;">
                        <h4 style="color: #2c5f4f; margin-bottom: 10px;">üìä G√©n√©ration 5</h4>
                        <p><strong>9 enfants</strong> du patriarche</p>
                        <p>N√©s entre 1948-1964</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #4a7c6b;">
                        <h4 style="color: #2c5f4f; margin-bottom: 10px;">üìä G√©n√©ration 6</h4>
                        <p><strong>36+ petits-enfants</strong></p>
                        <p>N√©s entre 1975-2002</p>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 4px solid #4a7c6b;">
                        <h4 style="color: #2c5f4f; margin-bottom: 10px;">üìä G√©n√©ration 7</h4>
                        <p><strong>Nouvelle g√©n√©ration</strong></p>
                        <p>2015-pr√©sent</p>
                    </div>
                </div>
            `;

            document.getElementById('overviewContent').innerHTML = html;
        }

        function renderTree() {
            if (!familyData || !familyData.generations) return;

            const treeContainer = document.getElementById('familyTree');
            let html = '<div class="tree-container">';

            familyData.generations.forEach((generation, index) => {
                const genNum = index + 1;
                html += `
                    <div class="generation-row" data-generation="${genNum}">
                        <div class="generation-label">
                            ${generation.level || 'G√©n√©ration ' + genNum}
                            ${generation.year ? '<br>' + generation.year : ''}
                        </div>
                        <div class="members-container">
                `;

                generation.members.forEach(memberId => {
                    const person = familyData.families.find(p => p.id === memberId);
                    if (person) {
                        html += createPersonBox(person, genNum);
                    }
                });

                html += `
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            treeContainer.innerHTML = html;
            updateGenerationCounts();
        }

        function createPersonBox(person, genNum) {
            const isPatriarch = person.role === 'Patriarche';
            const isHeir = person.role === 'H√©ritier';
            const isRoyal = person.role === 'Fondateur de la lign√©e' || person.role === 'Lign√©e royale';
            
            let starIcon = '';
            if (isPatriarch || isHeir || isRoyal) {
                starIcon = '<div class="heir-star">‚≠ê</div>';
            }

            const dates = person.dates || (person.born ? `n√© ${person.born}` : '');
            const role = person.role && !isPatriarch && !isHeir && !isRoyal ? `<div class="person-role">${person.role}</div>` : '';

            return `
                <div class="person-box gen-${genNum}" onclick="showModal('${person.id}')">
                    ${starIcon}
                    <div class="person-name">${person.name}</div>
                    ${dates ? `<div class="person-dates">${dates}</div>` : ''}
                    ${role}
                </div>
            `;
        }

        function renderPersons() {
            if (!familyData) return;

            let html = '';
            familyData.families.forEach(person => {
                html += `
                    <div class="person-card" onclick="showModal('${person.id}')" data-name="${person.name.toLowerCase()}">
                        <h3>${person.name}</h3>
                        ${person.ndap ? `<p><em>Ndap: ${person.ndap}</em></p>` : ''}
                        ${person.dates || person.born ? `<p>üìÖ ${person.dates || 'N√© ' + person.born}</p>` : ''}
                        ${person.generation ? `<p>üß¨ ${person.generation}</p>` : ''}
                        ${person.residence ? `<p>üìç ${person.residence}</p>` : ''}
                        ${person.role ? `<p><strong>${person.role}</strong></p>` : ''}
                    </div>
                `;
            });

            document.getElementById('personsGrid').innerHTML = html;
        }

        function filterPersons() {
            const searchTerm = document.getElementById('personSearch').value.toLowerCase();
            const cards = document.querySelectorAll('.person-card');

            cards.forEach(card => {
                const name = card.getAttribute('data-name');
                if (name.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function renderLocations() {
            if (!familyData || !familyData.locations) return;

            let html = '';
            familyData.locations.forEach(location => {
                html += `
                    <div class="location-card">
                        <h3>üìç ${location.name}</h3>
                        <p style="margin: 10px 0; color: #666;">${location.description}</p>
                        <p style="margin-top: 10px;"><strong>Branches familiales:</strong></p>
                        <ul style="margin-left: 20px; color: #666;">
                            ${location.families.map(f => `<li>${f}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });

            document.getElementById('locationsGrid').innerHTML = html;
        }

        function renderTimeline() {
            const timelineEvents = [
                { date: "~1770s", title: "Origines Royales", content: "Origine de la lign√©e royale √† Baleng - Fondateur de la famille" },
                { date: "~1800s", title: "Lign√©e Royale", content: "Descendance de la famille royale de Baleng" },
                { date: "~1850s", title: "Migration", content: "Installation de la famille √† Batchingou (Toukou)" },
                { date: "1898", title: "Naissance du Patriarche", content: "Naissance de Ta'a Fieu Tagni Tinang Joseph √† Batchingou (Toukou)" },
                { date: "1906", title: "Mariage principal", content: "Union avec Megni Ngongang Rebecca de Bamena" },
                { date: "1948-1964", title: "G√©n√©ration 5", content: "Naissance des 9 enfants du patriarche √† travers diverses localit√©s" },
                { date: "1960", title: "Ind√©pendance", content: "Ind√©pendance du Cameroun - Le patriarche rassemble la famille pendant le maquis" },
                { date: "1975-2002", title: "G√©n√©ration 6", content: "Expansion de la famille avec plus de 36 petits-enfants" },
                { date: "2001", title: "Succession", content: "D√©c√®s du patriarche (103 ans) et d√©signation de Poueme Emmanuel comme h√©ritier" },
                { date: "2015-pr√©sent", title: "G√©n√©ration 7", content: "Nouvelle g√©n√©ration avec la diaspora canadienne" }
            ];

            let html = '';
            timelineEvents.forEach(event => {
                html += `
                    <div class="timeline-item">
                        <div class="timeline-date">${event.date}</div>
                        <div class="timeline-content">
                            <h4>${event.title}</h4>
                            <p>${event.content}</p>
                        </div>
                    </div>
                `;
            });

            document.getElementById('timelineContent').innerHTML = html;
        }

        function showModal(personId) {
            const person = familyData.families.find(p => p.id === personId);
            if (!person) return;

            const modal = document.getElementById('personModal');
            const modalBody = document.getElementById('modalBody');

            let spousesHTML = '';
            if (person.spouse) {
                spousesHTML = `
                    <div class="modal-section">
                        <h3>üë´ Conjoint(e)</h3>
                        <div class="spouse-info">
                            <p>${person.spouse}</p>
                        </div>
                    </div>
                `;
            } else if (person.spouses && person.spouses.length > 0) {
                spousesHTML = `
                    <div class="modal-section">
                        <h3>üë´ Conjoints</h3>
                `;
                person.spouses.forEach(spouse => {
                    spousesHTML += `
                        <div class="spouse-info">
                            <p><strong>${spouse.name || spouse}</strong></p>
                            ${spouse.dates ? `<p>üìÖ ${spouse.dates}</p>` : ''}
                            ${spouse.place ? `<p>üìç ${spouse.place}</p>` : ''}
                            ${spouse.children ? `<p>üë∂ Enfants: ${Array.isArray(spouse.children) ? spouse.children.join(', ') : spouse.children}</p>` : ''}
                        </div>
                    `;
                });
                spousesHTML += `</div>`;
            }

            let childrenHTML = '';
            if (person.childrenNames && person.childrenNames.length > 0) {
                childrenHTML = `
                    <div class="modal-section">
                        <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Enfants (${person.childrenNames.length})</h3>
                        <div class="children-list">
                            <ul>
                                ${person.childrenNames.map(child => `<li>${child}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            } else if (person.children && typeof person.children === 'number') {
                childrenHTML = `
                    <div class="modal-section">
                        <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Enfants</h3>
                        <p>${person.children} enfant${person.children > 1 ? 's' : ''}</p>
                    </div>
                `;
            }

            let grandchildrenHTML = '';
            if (person.grandchildren && person.grandchildren.length > 0) {
                grandchildrenHTML = `
                    <div class="modal-section">
                        <h3>üë∂ Petits-enfants (${person.grandchildren.length})</h3>
                        <div class="children-list">
                            <ul>
                                ${person.grandchildren.map(gc => `<li>${gc}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            modalBody.innerHTML = `
                <div class="modal-header">
                    <h2>${person.name}</h2>
                    ${person.ndap ? `<p><em>Ndap: ${person.ndap}</em></p>` : ''}
                    ${person.dates || person.born ? `<p>üìÖ ${person.dates || 'N√© ' + person.born}</p>` : ''}
                    ${person.generation ? `<p>üß¨ ${person.generation}</p>` : ''}
                </div>

                ${person.birthPlace ? `
                    <div class="modal-section">
                        <h3>üìç Lieu de naissance</h3>
                        <p>${person.birthPlace}</p>
                    </div>
                ` : ''}

                ${person.residence ? `
                    <div class="modal-section">
                        <h3>üè† R√©sidence</h3>
                        <p>${person.residence}</p>
                    </div>
                ` : ''}

                ${person.deathPlace ? `
                    <div class="modal-section">
                        <h3>üíê Lieu de d√©c√®s</h3>
                        <p>${person.deathPlace}</p>
                    </div>
                ` : ''}

                ${person.burialPlace ? `
                    <div class="modal-section">
                        <h3>‚ö∞Ô∏è Lieu d'inhumation</h3>
                        <p>${person.burialPlace}</p>
                    </div>
                ` : ''}

                ${spousesHTML}
                ${childrenHTML}
                ${grandchildrenHTML}

                ${person.occupation ? `
                    <div class="modal-section">
                        <h3>üíº Profession</h3>
                        <p>${person.occupation}</p>
                    </div>
                ` : ''}

                ${person.titles && person.titles.length > 0 ? `
                    <div class="modal-section">
                        <h3>üéñÔ∏è Titres</h3>
                        <ul>
                            ${person.titles.map(title => `<li>${title}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}

                ${person.awards && person.awards.length > 0 ? `
                    <div class="modal-section">
                        <h3>üèÖ Distinctions</h3>
                        <ul>
                            ${person.awards.map(award => `<li>${award}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}

                ${person.succession ? `
                    <div class="modal-section">
                        <h3>üëë Succession</h3>
                        <p>${person.succession}</p>
                    </div>
                ` : ''}

                ${person.notes ? `
                    <div class="modal-section">
                        <h3>üìù Notes</h3>
                        <p>${person.notes}</p>
                    </div>
                ` : ''}
            `;

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('personModal').classList.remove('active');
        }

        // Close modal when clicking outside
        document.getElementById('personModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadData);

        // Generation filter functions
        let visibleGenerations = new Set([1, 2, 3, 4, 5, 6, 7]);

        function toggleGeneration(genNum) {
            const button = document.querySelector(`[data-gen="${genNum}"]`);
            const rows = document.querySelectorAll(`[data-generation="${genNum}"]`);
            
            if (visibleGenerations.has(genNum)) {
                visibleGenerations.delete(genNum);
                button.classList.remove('active');
                rows.forEach(row => row.classList.add('hidden'));
            } else {
                visibleGenerations.add(genNum);
                button.classList.add('active');
                rows.forEach(row => row.classList.remove('hidden'));
            }
            
            updateAllButton();
            updateVisibleCount();
        }

        function toggleAllGenerations() {
            const allButton = document.querySelector('.all-filters');
            const isAllVisible = visibleGenerations.size === 7;
            
            if (isAllVisible) {
                // Hide all
                visibleGenerations.clear();
                document.querySelectorAll('.gen-filter').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.generation-row').forEach(row => row.classList.add('hidden'));
                allButton.classList.remove('active');
            } else {
                // Show all
                visibleGenerations = new Set([1, 2, 3, 4, 5, 6, 7]);
                document.querySelectorAll('.gen-filter').forEach(btn => btn.classList.add('active'));
                document.querySelectorAll('.generation-row').forEach(row => row.classList.remove('hidden'));
                allButton.classList.add('active');
            }
            
            updateVisibleCount();
        }

        function updateAllButton() {
            const allButton = document.querySelector('.all-filters');
            if (visibleGenerations.size === 7) {
                allButton.classList.add('active');
            } else {
                allButton.classList.remove('active');
            }
        }

        function updateVisibleCount() {
            const totalVisible = Array.from(visibleGenerations).reduce((sum, gen) => {
                const count = parseInt(document.getElementById(`count-${gen}`).textContent);
                return sum + count;
            }, 0);
            
            document.getElementById('visibleCount').textContent = `(${totalVisible} membres visibles)`;
        }

        function updateGenerationCounts() {
            if (!familyData || !familyData.generations) return;
            
            familyData.generations.forEach((generation, index) => {
                const genNum = index + 1;
                const count = generation.members.length;
                const countElement = document.getElementById(`count-${genNum}`);
                if (countElement) {
                    countElement.textContent = count;
                }
            });
            
            updateVisibleCount();
        }
    </script>
</body>
</html>
